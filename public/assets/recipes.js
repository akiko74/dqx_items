function get_recipe_list(){var e=new Array;return $.each($("#recipe_list tbody th"),function(t,n){e.push($(n).text())}),e}function drow_recipe_list(e){$("#recipe_list tbody").empty();for(var t in e){var n=new Array,i="<tr><th>";i+='<a href="#" class="recipe_name" rel="popover" data-html="true" data-content="',i+="<ul>";for(var o in e[t].items)i+="<li>"+e[t].items[o].name+" \xd7 "+e[t].items[o].count,0==e[t].items[o].unitprice&&(n.push(e[t].items[o].name),i+="<span class='label label-warning'>\u30d0\u30b6\u30fc\u54c1</span>"),i+="</li>";i+="</ul>",i+='" data-title="',i+=e[t].name+"\u306e\u30ec\u30b7\u30d4",i+='" data-trigger="hover">',i+=e[t].name,i+="</a></th><td>"+e[t].price+"G",n.length>0&&(i+=' +<span class="label label-warning">\u30d0\u30b6\u30fc\u54c1</span>'),console.log(n),i+='</td><td><a href="#" onclick="javascript:drop_recipes(this)" class="btn btn-small btn-danger" style="color:white">\u524a\u9664</a>',i+="</td></tr>",$("#recipe_list tbody").append(i)}$("a[rel=popover].recipe_name").popover()}function add_recipes(){$("#recipes_keyword").attr("disabled","disabled");var e=get_recipe_list();return e.push($("#recipes_keyword").val()),reload_items(e),!1}function drop_recipes(e){return $(e).parents("tr").remove(),reload_items(get_recipe_list()),!1}function reload_items(e){$.getJSON("/recipes.json",{recipes:e},function(e){drow_recipe_list(e.recipe_list),drow_item_list(e.item_list)}),$("#recipes_keyword").val(null),0==e.length?($("#added_contents").hide(),$("#default_contents").show()):($("#added_contents").show(),$("#default_contents").hide()),$("#recipes_keyword").removeAttr("disabled")}function drow_item_list(e){$("#item_list tbody").empty();for(var t in e){var n=e[t].cost;0==n?n='<span class="label label-warning">\u30d0\u30b6\u30fc\u306e\u307f</a>':n+="G",$("#item_list tbody").append("<tr><th>"+e[t].name+"</th><td>"+e[t].count+"</td><td>"+n+'</td><td><a href="/items?keyword='+e[t].name+'" class="btn btn-warning btn-small">\u30ec\u30b7\u30d4</a></td></tr>')}}$(document).ready(function(){$("#added_contents").hide(),$("#default_contents").show()});